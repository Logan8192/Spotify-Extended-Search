extends ../layout
include ../shared/searchbar/searchBarMixin

block content
    section.section
        div.container
            +searchBar("/tracks", "Search Tracks")
            if searchResults
                if searchResults.length === 0
                      article.message.is-warning
                        div.message-header
                            p Warning
                        div.message-body No albums were found with your search criteria
                div.columns.is-multiline
                    each track in searchResults
                        div.column.is-3
                            div.card
                                a(href="/tracks/" + track.id)
                                    div.card-image
                                        figure.image.is-square
                                            if track.album.images[0]
                                                img(src=track.album.images[0].url, alt="Track Album Image")
                                            else
                                                img(src="https://dummyimage.com/640x640/000/fff.jpg&text=No+Image", alt="Track Album Image")
                                div.card-content
                                    div.media-content
                                        p.title.is-4= track.name
                                    div.content
                                        div
                                            p.title.is-5 From the #{track.album.album_type}:
                                            a.button.is-info.is-fullwidth.is-block(href="albums/" + track.album.id)
                                                span.icon
                                                    i.fas.fa-compact-disc
                                                span= track.album.name
                                        div
                                            if track.artists.length === 1
                                                p.title.is-5 Artist:
                                            else if track.artists.length > 1
                                                p.title.is-5 Artists:
                                            div.buttons
                                                each artist in track.artists
                                                    a.button.is-info.is-fullwidth.is-block(href="artists/" + artist.id)
                                                        span.icon
                                                            i.fas.fa-users
                                                        span= artist.name
                                footer.card-footer
                                    a.card-footer-item(href=track.external_urls.spotify, target="_blank")
                                        span.icon
                                            i.fab.fa-spotify
                                        span Open on Spotify
